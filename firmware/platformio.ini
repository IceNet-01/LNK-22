; LNK-22 Firmware - PlatformIO Configuration
; Professional LoRa mesh networking with zero license risk

[platformio]
default_envs = rak4631_full

; Common settings
[env]
framework = arduino
monitor_speed = 115200

; Meshtastic's nrf52_base configuration
[nrf52_base]
platform = nordicnrf52@^10.8.0
framework = arduino
platform_packages =
    platformio/framework-arduinoadafruitnrf52 @ https://github.com/meshtastic/Adafruit_nRF52_Arduino#c770c8a16a351b55b86e347a3d9d7b74ad0bbf39
build_flags =
    -DSERIAL_BUFFER_SIZE=1024
    -Wno-unused-variable
    -DMESHTASTIC_EXCLUDE_AUDIO=1
    -DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
    -Os

; RAK4631 LED Test - Using Meshtastic's framework fork
[env:rak4631_test]
extends = nrf52_base
board = adafruit_feather_nrf52840
lib_deps =
    SPI
    Wire
build_flags =
    ${nrf52_base.build_flags}
    -Ivariants/nrf52840/rak4631
    -DRAK4631
    -DNRF52840
    -DBOARD_NAME=\"RAK4631\"
    -DLNK22_VERSION=\"1.0.0-test\"
build_src_filter =
    -<*>
    +<main_test.cpp>
    +<../variants/nrf52840/rak4631/variant.cpp>

; RAK4631 Full - Complete MeshNet firmware with display
[env:rak4631_full]
extends = nrf52_base
board = adafruit_feather_nrf52840
lib_deps =
    SPI
    Wire
    ; âœ… NO LGPL DEPENDENCIES - Using Monocypher (Public Domain)
    bblanchon/ArduinoJson@^6.21.3
    jgromes/RadioLib@^6.6.0
    sparkfun/SparkFun u-blox GNSS Arduino Library@^2.2.25
    adafruit/Adafruit BusIO@^1.14.1
    adafruit/Adafruit SSD1306@^2.5.7
    adafruit/Adafruit GFX Library@^1.11.3
build_flags =
    ${nrf52_base.build_flags}
    -Ivariants/nrf52840/rak4631
    -DRAK4631
    -DNRF52840
    -DNRF52_SERIES
    -DHAS_SX1262
    -DHAS_GPS
    -DHAS_DISPLAY
    -DBOARD_NAME=\"RAK4631\"
    -DLNK22_VERSION=\"1.0.0\"
    -DUSE_CRYPTO_LIB
build_src_filter =
    +<*>
    -<main_test.cpp>
    +<../variants/nrf52840/rak4631/variant.cpp>
    +<crypto/monocypher.c>

; RAK11200 - ESP32 + SX1262
[env:rak11200]
platform = espressif32
board = esp32dev
lib_deps =
    ${env.lib_deps}
    SX126x-Arduino
    sparkfun/SparkFun u-blox GNSS Arduino Library@^2.2.25
build_flags =
    ${env.build_flags}
    -DRAK11200
    -DESP32
    -DHAS_SX1262
    -DHAS_GPS
    -DHAS_PREFERENCES
    -DBOARD_NAME="RAK11200"

; RAK3172 - STM32WL (Built-in LoRa)
[env:rak3172]
platform = ststm32
board = rak3172
lib_deps =
    ${env.lib_deps}
build_flags =
    ${env.build_flags}
    -DRAK3172
    -DSTM32WL
    -DHAS_STM32WL_LORA
    -DBOARD_NAME="RAK3172"

; Heltec LoRa32 V3 - ESP32-S3 + SX1262
[env:heltec_lora32_v3]
platform = espressif32
board = heltec_wifi_lora_32_V3
lib_deps =
    ${env.lib_deps}
    SX126x-Arduino
    sparkfun/SparkFun u-blox GNSS Arduino Library@^2.2.25
build_flags =
    ${env.build_flags}
    -DHELTEC_V3
    -DESP32S3
    -DHAS_SX1262
    -DHAS_DISPLAY
    -DHAS_GPS
    -DHAS_PREFERENCES
    -DBOARD_NAME="Heltec_V3"
